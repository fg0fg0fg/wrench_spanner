<div class="container">
  <div class="row mx-auto mt-3">
    <div class="col-md-3"></div>
    <div class="col-md-8 offset-md-1">
      <div class="row mt-3">
        <div class="col-md-2">
          <%= image_tag @user.get_profile_image, size: "50x50", class: "d-block mx-auto rounded-circle" %>
        </div>
        <div class="col-md-6">
          <div class="mt-2 text-start">
            <%= link_to user_path(@user), class: "link-secondary link-underline-opacity-0 link-underline-opacity-75-hover" do %>
              <%= @user.name %>さん
            <% end %>
          </div>
        </div>
      </div>
      <div class="row justify-content-center mt-3">
        <div class="col-md-3">
          <%= image_tag @post.get_post_image, size: "150x150", class: "d-block mx-auto" %>
        </div>
        <div class="col-md-8 border border-black rounded bg-body-tertiary">
          <div class="mt-3"><strong><%= @post.title %></strong><small> : <%= @genre.name %></small></div>
          <div class="mt-3"></div>
          <div class="mt-3"><%= @post.body %></div>
          <div class="mt-3">コメント件数: <%= @post.comments.count %></div>
        </div>
      </div>
      <div class="row justify-content-end mt-2">
        <% if @user == current_user %>
          <div class="col-auto pe-0">
            <%= link_to "編集", edit_post_path(@post), class: "btn btn-outline-success" %>
          </div>
          <div class="col-auto">
            <%= link_to "削除", post_path(@post), method: :delete, data: {confirm: "本当に削除しますか？"}, class: "btn btn-outline-danger" %>
          </div>
        <% end %>
      </div>
      <table class="table mx-5">
        <tbody>
          <% @post.comments.each do |comment| %>
            <tr>
              <td style="width:10%;">
                <%= link_to(comment.user) do %>
                  <%= image_tag comment.user.get_profile_image, size: "50x50", class: "rounded-circle" %>
                <% end %>
              </td>
              <td style="width:80%;"><%= comment.user.name %>さん<br><%= comment.body %></td>
              <% if comment.user == current_user %>
                <td style="width:10%;" class="align-bottom">
                  <%= link_to '削除', post_comment_path(comment.post,comment), method: :delete, class: "btn btn-outline-danger btn-sm align-item-bottom" %>
                </td>
              <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
      <div class="row justify-content-center ms-5">
        <%= form_with model: [@post, @comment] do |f| %>
          <div><%= f.text_area :body, rows: '5', class: "form-control" %></div>
          <div class="text-end mt-2"><%= f.submit "送信", class: "btn btn-outline-primary btn-sm" %></div>
        <% end %>
      </div>
    </div>
  </div>
</div>